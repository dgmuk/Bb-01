<!DOCTYPE html>
<html lang="ru" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Опросник по питанию</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        /* Исправление для Google Sites */
        html, body {
            height: auto !important;
            min-height: 1px !important;
            overflow: visible !important; 
        }

        /* Анимация для плавного появления блоков */
        .fade-in-item {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.6s ease-out forwards;
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Стилизация инпутов, селектов, текстовых полей */
        .form-input, .form-select, .form-textarea {
            background-color: #374151; border: 1px solid #4b5563;
            border-radius: 0.5rem; padding: 0.75rem 1rem; width: 100%;
            color: #d1d5db; transition: all 0.2s;
        }
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none; border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.4);
        }
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        /* Стилизация слайдера */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #4b5563;
            border-radius: 5px;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: #3b82f6;
            cursor: pointer;
            border-radius: 50%;
        }
        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: #3b82f6;
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <div id="main-container" class="container mx-auto max-w-4xl p-4 sm:p-8">
        
        <!-- Заголовок -->
        <header class="text-center mb-10 fade-in-item">
            <h1 class="text-3xl sm:text-4xl font-black text-white leading-tight">
                Опросник по питанию
            </h1>
        </header>
        
        <!-- Вступительный блок -->
        <div class="bg-gray-800 rounded-2xl p-6 mb-10 fade-in-item text-gray-400 space-y-3" style="animation-delay: 100ms;">
            <p>Уважаемый Клиент! Этот опросник поможет мне, вашему эксперту по питанию, составить наиболее эффективную и комфортную стратегию питания, которая будет учитывать ваши индивидуальные цели, предпочтения и образ жизни.</p>
            <p class="font-semibold text-gray-300">Пожалуйста, ответьте на все вопросы максимально честно и подробно. Вся предоставленная информация конфиденциальна.</p>
        </div>

        <!-- Форма с вопросами -->
        <form id="nutritionForm" class="space-y-8">
            <!-- Блок 1 -->
            <div class="bg-gray-800 rounded-2xl shadow-lg p-6 fade-in-item" style="animation-delay: 200ms;">
                <h2 class="text-2xl font-bold text-white mb-6 border-b-2 border-green-500 pb-3">Блок 1: Общая информация и Цели</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div><label for="date" class="block text-sm font-medium text-gray-300 mb-2">1. Дата заполнения:</label><input type="date" id="date" class="form-input"></div>
                    <div><label for="name" class="block text-sm font-medium text-gray-300 mb-2">2. Имя и Фамилия:</label><input type="text" id="name" class="form-input" placeholder="Введите имя и фамилию"></div>
                    <div><label for="age" class="block text-sm font-medium text-gray-300 mb-2">3. Возраст:</label><input type="number" id="age" class="form-input" placeholder="Возраст"></div>
                    <div><label for="gender" class="block text-sm font-medium text-gray-300 mb-2">4. Пол:</label><select id="gender" class="form-select"><option value="">Выберите пол</option><option value="Мужской">Мужской</option><option value="Женский">Женский</option></select></div>
                    <div><label for="height" class="block text-sm font-medium text-gray-300 mb-2">5. Рост (см):</label><input type="number" id="height" class="form-input" placeholder="Рост в см"></div>
                    <div><label for="weight" class="block text-sm font-medium text-gray-300 mb-2">6. Текущий вес (кг):</label><input type="number" id="weight" class="form-input" placeholder="Вес в кг"></div>
                </div>
                <div class="mt-6"><label for="goal" class="block text-sm font-medium text-gray-300 mb-2">7. Ваша основная цель в работе со мной:</label><select id="goal" class="form-select"><option value="">Выберите цель</option><option value="Похудение">Похудение</option><option value="Набор веса">Набор веса</option><option value="Поддержание веса">Поддержание веса</option><option value="Улучшение здоровья">Улучшение здоровья</option><option value="Увеличение энергии">Увеличение энергии</option></select></div>
                <div class="mt-6"><label for="goalNumber" class="block text-sm font-medium text-gray-300 mb-2">Напишите цифру, соответствующую вашей цели:</label><input type="text" id="goalNumber" class="form-input" placeholder="Например, похудеть на 7 кг"></div>
                <div class="mt-6"><label for="importance" class="block text-sm font-medium text-gray-300 mb-2">8. Насколько важна для вас эта цель по шкале от 1 до 10?</label><input type="range" id="importance" min="1" max="10" value="5"><div class="flex justify-between text-sm text-gray-500 mt-1"><span>1</span><span id="importanceValue">5</span><span>10</span></div></div>
                <div class="mt-6"><label for="expectedChanges" class="block text-sm font-medium text-gray-300 mb-2">9. Какие изменения в своем теле и самочувствии вы ожидаете увидеть?</label><textarea id="expectedChanges" class="form-textarea" placeholder="Опишите ожидаемые изменения..."></textarea></div>
            </div>

            <!-- Блок 2 -->
            <div class="bg-gray-800 rounded-2xl shadow-lg p-6 fade-in-item" style="animation-delay: 300ms;">
                <h2 class="text-2xl font-bold text-white mb-6 border-b-2 border-blue-500 pb-3">Блок 2: Состояние Здоровья и Ограничения</h2>
                <div class="space-y-6">
                    <div><label for="chronicDiseases" class="block text-sm font-medium text-gray-300 mb-2">10. Есть ли у вас хронические заболевания или диагнозы?</label><textarea id="chronicDiseases" class="form-textarea" placeholder="Диабет, заболевания щитовидной железы и т.д."></textarea></div>
                    <div><label for="medications" class="block text-sm font-medium text-gray-300 mb-2">11. Принимаете ли вы лекарства на постоянной основе?</label><textarea id="medications" class="form-textarea" placeholder="Перечислите принимаемые лекарства..."></textarea></div>
                    <div><label for="allergies" class="block text-sm font-medium text-gray-300 mb-2">12. Есть ли у вас пищевые аллергии или непереносимости?</label><textarea id="allergies" class="form-textarea" placeholder="Лактоза, глютен, орехи и т.д."></textarea></div>
                    <div><label for="dietaryRestrictions" class="block text-sm font-medium text-gray-300 mb-2">13. Есть ли продукты, которые вы не едите по этическим или религиозным соображениям?</label><textarea id="dietaryRestrictions" class="form-textarea" placeholder="Вегетарианство, веганство и т.д."></textarea></div>
                    <div><label for="eatingDisorders" class="block text-sm font-medium text-gray-300 mb-2">14. Были ли у вас ранее расстройства пищевого поведения?</label><textarea id="eatingDisorders" class="form-textarea" placeholder="Анорексия, булимия, компульсивное переедание..."></textarea></div>
                </div>
            </div>

            <!-- Блок 3 -->
            <div class="bg-gray-800 rounded-2xl shadow-lg p-6 fade-in-item" style="animation-delay: 400ms;">
                <h2 class="text-2xl font-bold text-white mb-6 border-b-2 border-orange-500 pb-3">Блок 3: Пищевые Привычки и Предпочтения</h2>
                <div class="space-y-6">
                    <div><label for="lovedFoods" class="block text-sm font-medium text-gray-300 mb-2">16. Какие продукты вы ОЧЕНЬ любите и хотели бы включить в рацион?</label><textarea id="lovedFoods" class="form-textarea" placeholder="Перечислите любимые продукты..."></textarea></div>
                    <div><label for="dislikedFoods" class="block text-sm font-medium text-gray-300 mb-2">17. Какие продукты вы СОВСЕМ не любите и хотели бы исключить?</label><textarea id="dislikedFoods" class="form-textarea" placeholder="Перечислите нелюбимые продукты..."></textarea></div>
                    <div><label for="eatingOut" class="block text-sm font-medium text-gray-300 mb-2">18. Насколько часто вы едите вне дома?</label><select id="eatingOut" class="form-select"><option value="">Выберите частоту</option><option value="Очень редко / Никогда">Очень редко / Никогда</option><option value="1-2 раза в месяц">1-2 раза в месяц</option><option value="1-2 раза в неделю">1-2 раза в неделю</option><option value="3-4 раза в неделю">3-4 раза в неделю</option><option value="Ежедневно">Ежедневно</option></select></div>
                    <div><label for="cookingAttitude" class="block text-sm font-medium text-gray-300 mb-2">19. Как вы относитесь к готовке?</label><select id="cookingAttitude" class="form-select"><option value="">Выберите отношение</option><option value="Люблю готовить, готов тратить время">Люблю готовить, готов тратить время</option><option value="Готовлю при необходимости">Готовлю при необходимости</option><option value="Не люблю готовить, нужны простые решения">Не люблю готовить, нужны простые решения</option></select></div>
                    <div><label for="planFlexibility" class="block text-sm font-medium text-gray-300 mb-2">22. Насколько гибким должен быть ваш план питания?</label><select id="planFlexibility" class="form-select"><option value="">Выберите тип плана</option><option value="Четкий план с конкретными блюдами и порциями">Четкий план с конкретными блюдами и порциями</option><option value="Нужен шаблон и список продуктов, но с возможностью выбора">Нужен шаблон и список продуктов, но с возможностью выбора</option><option value="Общие рекомендации, буду составлять сам">Общие рекомендации, буду составлять сам</option></select></div>
                    <div><label for="tracking" class="block text-sm font-medium text-gray-300 mb-2">23. Насколько вы готовы отслеживать свой рацион?</label><select id="tracking" class="form-select"><option value="">Выберите подход</option><option value="Готов считать калории и взвешивать продукты">Готов считать калории и взвешивать продукты</option><option value="Готов использовать приложения для подсчета">Готов использовать приложения для подсчета</option><option value="Не хочу считать калории, предпочитаю ориентироваться на размер порций">Не хочу считать калории, предпочитаю ориентироваться на размер порций</option></select></div>
                    <div><label for="budget" class="block text-sm font-medium text-gray-300 mb-2">24. Каков ваш примерный бюджет на продукты в месяц?</label><select id="budget" class="form-select"><option value="">Выберите бюджет</option><option value="Низкий">Низкий</option><option value="Средний">Средний</option><option value="Высокий">Высокий</option><option value="Без ограничений">Без ограничений</option></select></div>
                    <div><label for="otherFactors" class="block text-sm font-medium text-gray-300 mb-2">25. Есть ли другие важные факторы, касающиеся питания?</label><textarea id="otherFactors" class="form-textarea" placeholder="Дополнительная информация..."></textarea></div>
                </div>
            </div>

            <!-- Блок 4 -->
            <div class="bg-gray-800 rounded-2xl shadow-lg p-6 fade-in-item" style="animation-delay: 500ms;">
                <h2 class="text-2xl font-bold text-white mb-6 border-b-2 border-violet-500 pb-3">Блок 4: Образ Жизни и Физическая Активность</h2>
                <div class="space-y-6">
                    <div><label for="workSchedule" class="block text-sm font-medium text-gray-300 mb-2">26. Опишите ваш типичный рабочий график и уровень стресса:</label><select id="workSchedule" class="form-select"><option value="">Выберите описание</option><option value="Сидячая работа, высокий уровень стресса">Сидячая работа, высокий уровень стресса</option><option value="Сидячая работа, низкий/средний уровень стресса">Сидячая работа, низкий/средний уровень стресса</option><option value="Активная работа (на ногах), низкий/средний уровень стресса">Активная работа (на ногах), низкий/средний уровень стресса</option><option value="Активная работа, высокий уровень стресса">Активная работа, высокий уровень стресса</option><option value="Физическая работа">Физическая работа</option></select></div>
                    <div><label for="sleepQuality" class="block text-sm font-medium text-gray-300 mb-2">27. Как бы вы оценили качество своего сна?</label><select id="sleepQuality" class="form-select"><option value="">Выберите качество сна</option><option value="Отличное (сплю 7-9 часов, легко засыпаю)">Отличное (сплю 7-9 часов, легко засыпаю)</option><option value="Удовлетворительное (сплю меньше 7 часов, проблемы с засыпанием)">Удовлетворительное (сплю меньше 7 часов, проблемы с засыпанием)</option><option value="Плохое (постоянные проблемы со сном)">Плохое (постоянные проблемы со сном)</option></select></div>
                    <div><label for="physicalActivity" class="block text-sm font-medium text-gray-300 mb-2">28. Какова ваша текущая физическая активность?</label><textarea id="physicalActivity" class="form-textarea" placeholder="Много хожу пешком, использую лестницу..."></textarea></div>
                    <div><label for="badHabits" class="block text-sm font-medium text-gray-300 mb-2">30. Есть ли у вас привычки, которые могут мешать достижению цели?</label><textarea id="badHabits" class="form-textarea" placeholder="Частые перекусы перед телевизором, поздние ужины..."></textarea></div>
                    <div><label for="lifestyleChanges" class="block text-sm font-medium text-gray-300 mb-2">31. Насколько вы готовы к изменениям в образе жизни?</label><textarea id="lifestyleChanges" class="form-textarea" placeholder="Увеличение бытовой активности, улучшение сна..."></textarea></div>
                </div>
            </div>

            <!-- Блок 5 -->
            <div class="bg-gray-800 rounded-2xl shadow-lg p-6 fade-in-item" style="animation-delay: 600ms;">
                <h2 class="text-2xl font-bold text-white mb-6 border-b-2 border-pink-500 pb-3">Блок 5: Дополнительная информация</h2>
                <div class="space-y-6">
                    <div><label for="biggestChallenge" class="block text-sm font-medium text-gray-300 mb-2">32. Что для вас является наибольшим вызовом в изменении пищевых привычек?</label><textarea id="biggestChallenge" class="form-textarea" placeholder="Отсутствие времени, сила воли, любовь к сладкому..."></textarea></div>
                    <div><label for="motivation" class="block text-sm font-medium text-gray-300 mb-2">33. Что или кто мотивирует вас на изменения?</label><textarea id="motivation" class="form-textarea" placeholder="Опишите вашу мотивацию..."></textarea></div>
                    <div><label for="additionalInfo" class="block text-sm font-medium text-gray-300 mb-2">34. Есть ли еще какая-либо важная информация?</label><textarea id="additionalInfo" class="form-textarea" placeholder="Любая дополнительная информация..."></textarea></div>
                </div>
            </div>
        </form>

        <!-- Кнопка -->
        <div class="mt-10 text-center fade-in-item" style="animation-delay: 700ms;">
            <button id="copy-btn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-colors shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-500/50 shimmer-btn">
                Скопировать ответы для тренера
            </button>
        </div>

        <!-- Подвал -->
        <footer class="text-center mt-12 border-t border-gray-700 pt-6">
            <p class="text-sm text-gray-500">&copy; 2025 г. Все права защищены. Специально для проекта Body balance.</p>
        </footer>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('main-container');
            const copyButton = document.getElementById('copy-btn');
            const form = document.getElementById('nutritionForm');
            const allInputs = form.querySelectorAll('input, select, textarea');
            const STORAGE_KEY = 'nutritionQuestionnaireState';

            // --- Сохранение и загрузка ---
            function saveState() {
                const state = {};
                allInputs.forEach(input => {
                    if (input.type === 'range') {
                        state[input.id] = input.value;
                        document.getElementById('importanceValue').textContent = input.value;
                    } else {
                        state[input.id] = input.value;
                    }
                });
                localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
            }

            function loadState() {
                const savedState = localStorage.getItem(STORAGE_KEY);
                if (savedState) {
                    const state = JSON.parse(savedState);
                    allInputs.forEach(input => {
                        if (state[input.id] !== undefined) {
                            input.value = state[input.id];
                            if (input.id === 'importance') {
                                document.getElementById('importanceValue').textContent = input.value;
                            }
                        }
                    });
                }
            }

            allInputs.forEach(input => {
                input.addEventListener('input', saveState);
            });

            // --- Копирование ---
            copyButton.addEventListener('click', () => {
                let reportText = "📝 Опросник по питанию\n\n";
                const labels = {
                    date: "1. Дата заполнения", name: "2. Имя и Фамилия", age: "3. Возраст", gender: "4. Пол", height: "5. Рост (см)", weight: "6. Текущий вес (кг)", goal: "7. Основная цель", goalNumber: "Конкретная цель в цифрах", importance: "8. Важность цели (1-10)", expectedChanges: "9. Ожидаемые изменения",
                    chronicDiseases: "10. Хронические заболевания", medications: "11. Принимаемые лекарства", allergies: "12. Пищевые аллергии", dietaryRestrictions: "13. Диетические ограничения", eatingDisorders: "14. Расстройства пищевого поведения",
                    lovedFoods: "16. Любимые продукты", dislikedFoods: "17. Нелюбимые продукты", eatingOut: "18. Частота питания вне дома", cookingAttitude: "19. Отношение к готовке", planFlexibility: "22. Гибкость плана", tracking: "23. Готовность к отслеживанию", budget: "24. Бюджет на продукты", otherFactors: "25. Другие факторы",
                    workSchedule: "26. Рабочий график и стресс", sleepQuality: "27. Качество сна", physicalActivity: "28. Физическая активность", badHabits: "30. Вредные привычки", lifestyleChanges: "31. Готовность к изменениям",
                    biggestChallenge: "32. Наибольший вызов", motivation: "33. Мотивация", additionalInfo: "34. Доп. информация"
                };
                
                for (const id in labels) {
                    const el = document.getElementById(id);
                    if (el && el.value) {
                        reportText += `${labels[id]}: ${el.value}\n`;
                    }
                }

                const tempTextarea = document.createElement('textarea');
                tempTextarea.value = reportText;
                document.body.appendChild(tempTextarea);
                tempTextarea.select();
                try {
                    document.execCommand('copy');
                    copyButton.textContent = '✅ Скопировано!';
                } catch (err) {
                    copyButton.textContent = 'Ошибка!';
                    console.error('Ошибка копирования: ', err);
                }
                document.body.removeChild(tempTextarea);

                setTimeout(() => {
                    copyButton.textContent = 'Скопировать ответы для тренера';
                }, 2500);
            });

            // --- Исправление высоты для Google Sites ---
            if ('ResizeObserver' in window) {
                const observer = new ResizeObserver(entries => {
                    if (entries.length > 0) {
                        const height = entries[0].target.scrollHeight;
                        document.body.style.height = height + 'px';
                        document.documentElement.style.height = height + 'px';
                    }
                });
                if (container) observer.observe(container);
            }

            // Инициализация
            document.getElementById('date').valueAsDate = new Date();
            loadState();
        });
    </script>
</body>
</html>
